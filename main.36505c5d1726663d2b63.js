(()=>{"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._alternative=e.alternative,this._templateSelector=t,this._handleCardClick=s}generateCard(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".places__image"),this._cardImage.src=this._link,this._cardImage.alt=this._alternative,this._element.querySelector(".places__depiction").textContent=this._name,this._setEventListeners(),this._element}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".places__place").cloneNode(!0)}_toggleLike(e){e.target.classList.toggle("places__heart_active")}_deleteCard(e){e.remove()}_setEventListeners(){this._element.querySelector(".places__heart").addEventListener("click",this._toggleLike),this._element.querySelector(".places__delete-icon").addEventListener("click",(()=>{this._deleteCard(this._element)})),this._cardImage.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}}class t{constructor(e,t){this._config=e,this._form=t,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector)}_hideInputError(e){this._errorElement=this._form.querySelector(`.${e.id}-error`),e.classList.remove(this._config.inputErrorClass),this._errorElement.classList.remove(this._config.errorClass),this._errorElement.textContent=""}_showInputError(e){this._errorElement=this._form.querySelector(`.${e.id}-error`),e.classList.add(this._config.inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._config.errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_disableSubmitButton(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}_enableSubmitButton(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._setEventListeners()}}class s{constructor(e){this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popup.addEventListener("mousedown",(e=>{e.target.classList.contains("popup_opened")&&this.close(),e.target.classList.contains("popup__close-button")&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._handlerFormSubmit=t,this._popupForm=this._popup.querySelector(".popup__form"),this._inputList=this._popupForm.querySelectorAll(".popup__input")}close(){super.close(),this._popupForm.reset()}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}_getInputValues(){return this._formData={},this._inputList.forEach((e=>{this._formData[e.name]=e.value})),this._formData}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handlerFormSubmit(this._getInputValues()),this.close()}))}}const r=document.querySelector(".places"),o=document.querySelector(".profile__edit-button"),i=(document.querySelector("#popup__profile-setting").querySelector("#profile-setting_close-button"),document.querySelector(".popup__input_name"),document.querySelector(".profile__name")),a=(document.querySelector(".popup__input_description"),document.querySelector(".profile__description")),u=document.querySelector(".profile__image"),p=document.querySelector(".profile__add-button");document.querySelector("#popup__cards-setting").querySelector("#cards-setting_close-button"),document.querySelector(".popup__input_title"),document.querySelector(".popup__input_url"),document.querySelector(".popup-image");const l=new class{constructor(e){this.url=e.url,this.headers=e.headers}_handleResponseStatus(e){return e.ok?e.json():Promise.reject(`Произошла ошибка: ${e.status}`)}getUserInformation(){return fetch(`${this.url}/users/me`,{method:"GET",headers:{authorization:this.headers,"Content-Type":"application/json"}}).then((e=>this._handleResponseStatus(e)))}getInitialCards(){return fetch(`${this.url}/cards`,{method:"GET",headers:{authorization:this.headers,"Content-Type":"application/json"}}).then((e=>this._handleResponseStatus(e)))}updateUserInformation(e){return fetch(`${this.url}/users/me`,{method:"PATCH",headers:{authorization:this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((e=>this._handleResponseStatus(e)))}handleAddCard(e){return fetch(`${this.url}/cards`,{method:"POST",headers:{authorization:this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((e=>this._handleResponseStatus(e)))}}({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:"50c7d53e-b526-44ca-b3ac-53bfa1ff2f46"}),c={};function _(e,t){d.open({name:e,link:t})}var h;h={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},Array.from(document.querySelectorAll(h.formSelector)).forEach((e=>{const s=new t(h,e),n=e.getAttribute("name");c[n]=s,s.enableValidation()}));const d=new class extends s{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup-image__image"),this._captionPopupImage=this._popup.querySelector(".popup-image__caption")}open(e){super.open(),this._captionPopupImage.textContent=e.name,this._popupImage.src=e.link,this._popupImage.alt=`Изображение ${e.name}`}}(".popup-image");d.setEventListeners();const m=new class{constructor(e,t){this._container=t,this._renderer=e}renderItems(e){e.reverse().forEach((e=>{this._renderer(e,this._container)}))}renderItem(e){this._renderer(e,this._container)}}((function(e,t){t.prepend(e)}),r);l.getInitialCards().then((e=>{const t=e.map((e=>g(e)));m.renderItems(t)})),l.getUserInformation().then((e=>{S.setUserInfo(e)})).catch((e=>console.log(e)));const f=new n("#popup__cards-setting",(function(e){l.handleAddCard(e).then((e=>m.renderItem(g(e)))).catch((e=>console.log(e)))}));function g(t){return new e(t,"#template-place",_).generateCard()}f.setEventListeners();const S=new class{constructor(e,t,s){this._name=e,this._description=t,this._avatarInput=s}getUserInfo(){return this._userInfo={},this._userInfo.name=this._name.textContent,this._userInfo.about=this._description.textContent,this._userInfo}setUserInfo(e){this._name.textContent=e.name,this._description.textContent=e.about,this._avatarInput.src=e.avatar}setUserAvatar(e){this._avatarInput.src=e.avatarImput}}(i,a,u),v=new n("#popup__profile-setting",(function(e){l.updateUserInformation(e).then((e=>{S.setUserInfo(e)})).catch((e=>console.log(e)))}));v.setEventListeners(),o.addEventListener("click",(function(){v.open(),v.setInputValues(S.getUserInfo()),c["profile-setup-form"].resetValidation()})),p.addEventListener("click",(function(){f.open(),c["cards-setting-form"].resetValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWUsc0JBQXNCdkQsaUJBQ3ZDLElBRUE4QixFQUFlL0QsaUJBQWlCLFNBQVMsV0FFdkNxSCxFQUFVL0UsT0FDVmtELEVBQWUsc0JBQXNCdkQsaUJBQ3ZDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fYWx0ZXJuYXRpdmUgPSBkYXRhLmFsdGVybmF0aXZlO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fYWx0ZXJuYXRpdmU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fZGVwaWN0aW9uXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcGxhY2VcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfdG9nZ2xlTGlrZShldnQpIHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJwbGFjZXNfX2hlYXJ0X2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9kZWxldGVDYXJkKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgLy8g0KHRgtCw0LLQuNC8INC70LDQudC6XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2hlYXJ0XCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3RvZ2dsZUxpa2UpO1xuXG4gICAgdGhpcy5fZWxlbWVudCAvLyDQo9C00LDQu9GP0LXQvCDQutCw0YDRgtC+0YfQutGDXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2RlbGV0ZS1pY29uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZCh0aGlzLl9lbGVtZW50KTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ2FyZCB9O1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSAvL9Cf0L7Qu9GD0YfQsNC10Lwg0LjQvdC/0YPRgtGLXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICAgID8gdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxuICAgICAgOiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpOyAvLyDQotC40L8g0LrQvdC+0L/QutC4KNGB0L7RhdGA0LDQvdC40Y8g0L/QvtC/0LDQv9CwKSDQstGL0LrQu9GO0YfQtdC90L3QsFxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKVxuICAgICAgPyB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKClcbiAgICAgIDogdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCB7IEZvcm1WYWxpZGF0b3IgfTtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7IC8vINC+0YLQutGA0YvRgtGMINC/0L7Qv9Cw0L9cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpOyAvLyDQl9Cw0LrRgNGL0YLRjCDQv9C+0L/QsNC/XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgeyBQb3B1cCB9O1xuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVyRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZXJGb3JtU3VibWl0ID0gaGFuZGxlckZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgLy8g0YLRg9GCINCy0YHRgtCw0LLQu9GP0LXQvCDQsiBgdmFsdWVgINC40L3Qv9GD0YLQsCDQtNCw0L3QvdGL0LUg0LjQtyDQvtCx0YrQtdC60YLQsCDQv9C+INCw0YLRgNC40LHRg9GC0YMgYG5hbWVgINGN0YLQvtCz0L4g0LjQvdC/0YPRgtCwXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybURhdGEgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1EYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1EYXRhO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVyRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgeyBQb3B1cFdpdGhGb3JtIH07XG4iLCJjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8qINCh0JXQmtCm0JjQryDQotCV0JzQn9Cb0JXQmdCiICjQmtCQ0KDQotCe0KfQmtCYKSAqL1xuY29uc3QgcGxhY2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNcIik7IC8vINCx0LvQvtC6INCyIGh0bWwg0LTQu9GPINC60LDRgNGC0L7Rh9C60LhcblxuLyog0J/QntCf0JDQnyDQoNCV0JTQkNCa0KLQmNCg0J7QktCQ0J3QmNCVINCf0KDQntCk0JjQm9CvICovXG5jb25zdCBwcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTsgLy8g0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0L/RgNC+0YTQuNC70YHRj1xuY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fcHJvZmlsZS1zZXR0aW5nXCIpOyAvLyDRgdC10LrRhtC40Y8g0L/QvtC/0LDQv1xuY29uc3QgY2xvc2VCdXR0b25Qb3B1cFByb2ZpbGUgPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1zZXR0aW5nX2Nsb3NlLWJ1dHRvblwiXG4pOyAvLyDQutC90L7Qv9C60LAg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/XG4vL2NvbnN0IGZvcm1FbFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtc2V0dGluZ19fZm9ybVwiKTsgLy/RhNC+0YDQvNCwINC40L3Qv9GD0YLQvtCyXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9uYW1lXCIpOyAvLyDQuNC90L/Rg9GCINGBINC40LzQtdC90LXQvFxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7IC8vINC40LzRjyDQv9GA0L7RhNC40LvRj1xuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X2Rlc2NyaXB0aW9uXCIpOyAvLyDQuNC90L/Rg9GCINGBINC+0L/QuNGB0LDQvdC40LXQvFxuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpOyAvLyDQvtC/0LjRgdCw0L3QuNC1INC/0YDQvtGE0LjQu9GB0Y9cbmNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcbi8qINCg0JXQlNCQ0JrQotCY0KDQntCS0JDQndCY0JUg0J/QoNCe0KTQmNCb0K8gKi9cblxuLyog0J/QntCf0JDQnyDQlNCe0JHQkNCS0JvQldCd0JjQryDQmtCQ0KDQotCe0KfQmtCYICovXG5jb25zdCBjYXJkc0FkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTsgLy8g0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgcG9wdXBDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX2NhcmRzLXNldHRpbmdcIik7IC8vINGB0LXQutGG0LjRjyDQv9C+0L/QsNC/INGBINC60LDRgNGC0L7Rh9C60LDQvNC4XG5jb25zdCBjbG9zZUJ1dHRvbkNhcmRzID0gcG9wdXBDYXJkcy5xdWVyeVNlbGVjdG9yKFxuICBcIiNjYXJkcy1zZXR0aW5nX2Nsb3NlLWJ1dHRvblwiXG4pOyAvLyDQutC90L7Qv9C60LAg0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/XG4vL2NvbnN0IGZvcm1FbENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkcy1zZXR0aW5nX19mb3JtXCIpOyAvL9GE0L7RgNC80LAg0LjQvdC/0YPRgtC+0LJcbmNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90aXRsZVwiKTsgLy8g0LjQvdC/0YPRgiDRgSDQvdCw0LfQstCw0L3QuNC10LxcbmNvbnN0IHVybElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdXJsXCIpOyAvLyDQuNC90L/Rg9GCINGBINGB0YHRi9C70LrQvtC5XG4vKiDQn9Ce0J/QkNCfINCU0J7QkdCQ0JLQm9CV0J3QmNCvINCa0JDQoNCi0J7Qp9Ca0JggKi9cblxuY29uc3QgYXBpQ29uZmlnID0ge1xuICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MFwiLFxuICBoZWFkZXJzOiBcIjUwYzdkNTNlLWI1MjYtNDRjYS1iM2FjLTUzYmZhMWZmMmY0NlwiLFxufTtcblxuLyog0J/QntCf0JDQnyDQn9Cg0J7QodCc0J7QotCg0JAg0JrQkNCg0KLQntCn0JrQmCAqL1xuY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtaW1hZ2VcIik7IC8vINC/0L7Qv9Cw0L8g0YEg0LrQsNGA0YLQuNC90LrQvtC5XG5cbmV4cG9ydCB7XG4gIHZhbGlkYXRpb25Db25maWcsXG4gIHBsYWNlcyxcbiAgcHJvZmlsZUJ1dHRvbixcbiAgcG9wdXBQcm9maWxlLFxuICBuYW1lSW5wdXQsXG4gIHByb2ZpbGVOYW1lLFxuICBkZXNjcmlwdGlvbklucHV0LFxuICBkZXNjcmlwdGlvbixcbiAgY2FyZHNBZGRCdXR0b24sXG4gIHBvcHVwQ2FyZHMsXG4gIHRpdGxlSW5wdXQsXG4gIHVybElucHV0LFxuICBwb3B1cEltYWdlLFxuICBjbG9zZUJ1dHRvblBvcHVwUHJvZmlsZSxcbiAgY2xvc2VCdXR0b25DYXJkcyxcbiAgYXBpQ29uZmlnLFxuICBhdmF0YXJJbWFnZSxcbn07XG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgcGxhY2VzLFxuICBwcm9maWxlQnV0dG9uLFxuICBuYW1lSW5wdXQsXG4gIHByb2ZpbGVOYW1lLFxuICBkZXNjcmlwdGlvbklucHV0LFxuICBkZXNjcmlwdGlvbixcbiAgY2FyZHNBZGRCdXR0b24sXG4gIHRpdGxlSW5wdXQsXG4gIHVybElucHV0LFxuICBhcGlDb25maWcsXG4gIGF2YXRhckltYWdlLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcblxuLy8g0JrQu9Cw0YHRgSBBcGlcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcblxuLy8g0KTQvtGA0LzRiyDQstCw0LvQuNC00LDRhtC40LhcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuLy8g0L7RgtC60YDRi9GC0Ywg0L/QvtC/0LDQvyDRgSDQutCw0YDRgtC40L3QutC+0LlcblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIGxpbmspIHtcbiAgcG9wdXBXaXRoSW1hZ2Uub3Blbih7IG5hbWUsIGxpbmsgfSk7XG59XG5cbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40LhcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XG5cbi8vINCa0LvQsNGB0YEgcG9wdXBXaXRoSW1hZ2UgID0+XG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cC1pbWFnZVwiKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0YTRg9C90LrRhtC40Y8g0LTQu9GPIFNlY3Rpb25cbmZ1bmN0aW9uIHJlbmRlcmVyKGVsZW1lbnQsIGNvbnRhaW5lcikge1xuICBjb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbn1cblxuLy8g0JrQu9Cw0YHRgSBTZWN0aW9uICA9PlxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHJlbmRlcmVyLCBwbGFjZXMpO1xuXG4vL9GA0LXQvdC00LXRgCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigob2JqZWN0KSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG9iamVjdC5tYXAoKGRhdGEpID0+IHtcbiAgICByZXR1cm4gY3JlYXRlQ2FyZChkYXRhKTtcbiAgfSk7XG4gIHNlY3Rpb24ucmVuZGVySXRlbXMoZGVmYXVsdENhcmRMaXN0KTtcbn0pO1xuXG4vL9C00LDQvdC90YvQtSDQv9GA0L7RhNC40LvRjyDQvdCwINGB0LXRgNCy0LXRgFxuYXBpXG4gIC5nZXRVc2VySW5mb3JtYXRpb24oKVxuICAudGhlbigoSW5mbykgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKEluZm8pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbi8vINCa0LvQsNGB0YEg0L/QvtC/0LDQvyDQutCw0YDRgtC+0YfQutC4ID0+XG5jb25zdCBwb3B1cENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcG9wdXBfX2NhcmRzLXNldHRpbmdcIixcbiAgaGFuZGxlQ2FsbGJhY2tDYXJkXG4pO1xuXG5mdW5jdGlvbiBoYW5kbGVDYWxsYmFja0NhcmQoY2FyZCkge1xuICBhcGlcbiAgICAuaGFuZGxlQWRkQ2FyZChjYXJkKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gc2VjdGlvbi5yZW5kZXJJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG4vLyDRgdC+0LfQtNCw0ZHQvCDQutCw0YDRgtC+0YfQutGDXG5mdW5jdGlvbiBjcmVhdGVDYXJkKG9iamVjdCkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQob2JqZWN0LCBcIiN0ZW1wbGF0ZS1wbGFjZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxucG9wdXBDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINCa0LvQsNGB0YEg0L/QvtC/0LDQvyDQv9GA0L7RhNC40LvRjywg0Y7Qt9C10YDQsCA9PlxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZU5hbWUsIGRlc2NyaXB0aW9uLCBhdmF0YXJJbWFnZSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhbGxiYWNsUHJvZmlsZShvYmplY3QpIHtcbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvcm1hdGlvbihvYmplY3QpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG4vLyDQutC70LDRgdGBINC/0L7Qv9Cw0L8g0L/RgNC+0YTQuNC70Y8gPT5cbmNvbnN0IHBvcHVwUHJvZmlsZVNldHRpbmcgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcG9wdXBfX3Byb2ZpbGUtc2V0dGluZ1wiLFxuICBoYW5kbGVDYWxsYmFjbFByb2ZpbGVcbik7XG5wb3B1cFByb2ZpbGVTZXR0aW5nLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0L/QviDQvdCw0LbQsNGC0LjRjiDQvdCwINC60L3QvtC/0LrRgyDQv9GA0L7RhNC40LvRj1xuICBwb3B1cFByb2ZpbGVTZXR0aW5nLm9wZW4oKTtcbiAgcG9wdXBQcm9maWxlU2V0dGluZy5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLXNldHVwLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuY2FyZHNBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgLy/QvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQv9C+INC90LDQttCw0YLQuNGOINC90LAg0LrQvdC+0L/QutGDINC00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcbiAgcG9wdXBDYXJkLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjYXJkcy1zZXR0aW5nLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuLypcblxuY29uc3QgcG9wdXBDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXBfX2NhcmRzLXNldHRpbmdcIiwgKG9iamVjdCkgPT4ge1xuICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKG9iamVjdCkpO1xufSk7XG5wb3B1cENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5cblxuYXBpLnVwZGF0ZVVzZXJJbmZvcm1hdGlvbihvYmplY3QpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG5cblxuXG5cbmFwaS51cGRhdGVVc2VySW5mb3JtYXRpb24oKS50aGVuKChpbmZvKSA9PiB7XG4gIGNvbnNvbGUubG9nKGluZm8pXG59KSAgXG5cbnJldHVybiBmZXRjaChcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAvY2FyZHNcIiwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjUwYzdkNTNlLWI1MjYtNDRjYS1iM2FjLTUzYmZhMWZmMmY0NlwiLFxuXG5jb25zdCBwb3B1cFByb2ZpbGVTZXR0aW5nID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3BvcHVwX19wcm9maWxlLXNldHRpbmdcIixcbiAgKG9iamVjdCkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG9iamVjdCk7XG4gIH1cbik7XG5cbiovXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBhcGkge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgdGhpcy51cmwgPSBjb25maWcudXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVzcG9uc2VTdGF0dXMocmVzKSB7XHJcbiAgICByZXR1cm4gcmVzLm9rXHJcbiAgICAgID8gcmVzLmpzb24oKVxyXG4gICAgICA6IFByb21pc2UucmVqZWN0KGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mb3JtYXRpb24oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlU3RhdHVzKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuaGVhZGVycyxcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2VTdGF0dXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm9ybWF0aW9uKHVzZXJJbmZvKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuaGVhZGVycyxcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHVzZXJJbmZvLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHVzZXJJbmZvLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2VTdGF0dXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQWRkQ2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlU3RhdHVzKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8qIFxyXG5cclxuXHJcblxyXG5yZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogXCJNYXJpZSBTa8WCb2Rvd3NrYSBDdXJpZVwiLFxyXG4gICAgICAgIGFib3V0OiBcIlBoeXNpY2lzdCBhbmQgQ2hlbWlzdFwiLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXHJcbiAgICAgIG5ldyBFcnJvcihg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApXHJcblxyXG5cclxuKi9cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWltYWdlX19pbWFnZVwiKTsgLy/QutCw0YDRgtC40L3QutCwINC/0L7Qv9Cw0L/QsFxuICAgIHRoaXMuX2NhcHRpb25Qb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgIC8vINCe0L/QuNGB0LDQvdC40LUg0LrQsNGA0YLQuNC90LrQuFxuICAgICAgXCIucG9wdXAtaW1hZ2VfX2NhcHRpb25cIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGltYWdlKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2NhcHRpb25Qb3B1cEltYWdlLnRleHRDb250ZW50ID0gaW1hZ2UubmFtZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGltYWdlLmxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBg0JjQt9C+0LHRgNCw0LbQtdC90LjQtSAke2ltYWdlLm5hbWV9YDtcbiAgfVxufVxuXG5leHBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9O1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXIpIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKG9iamVjdCkge1xuICAgIG9iamVjdC5yZXZlcnNlKCkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoZWxlbWVudCwgdGhpcy5fY29udGFpbmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQsIHRoaXMuX2NvbnRhaW5lcik7XG4gIH1cbn1cblxuZXhwb3J0IHsgU2VjdGlvbiB9O1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lSW5wdXQsIGRlc2NyaXB0aW9uSW5wdXQsIGF2YXRhcklucHV0KSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWVJbnB1dDtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uSW5wdXQ7XG4gICAgdGhpcy5fYXZhdGFySW5wdXQgPSBhdmF0YXJJbnB1dDtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJJbmZvID0ge307XG4gICAgdGhpcy5fdXNlckluZm8ubmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fdXNlckluZm8uYWJvdXQgPSB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFySW5wdXQuc3JjID0gZGF0YS5hdmF0YXI7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKG9iamVjdCkge1xuICAgIHRoaXMuX2F2YXRhcklucHV0LnNyYyA9IG9iamVjdC5hdmF0YXJJbXB1dDtcbiAgfVxufVxuZXhwb3J0IHsgVXNlckluZm8gfTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfYWx0ZXJuYXRpdmUiLCJhbHRlcm5hdGl2ZSIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImdlbmVyYXRlQ2FyZCIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRJbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl90b2dnbGVMaWtlIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2RlbGV0ZUNhcmQiLCJlbGVtZW50IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9oaWRlSW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsIl9lcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZXJGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlckZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwicmVzZXQiLCJzZXRJbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybURhdGEiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicGxhY2VzIiwicHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVOYW1lIiwiZGVzY3JpcHRpb24iLCJhdmF0YXJJbWFnZSIsImNhcmRzQWRkQnV0dG9uIiwiYXBpIiwidXJsIiwiaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZVN0YXR1cyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mb3JtYXRpb24iLCJmZXRjaCIsIm1ldGhvZCIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwidXBkYXRlVXNlckluZm9ybWF0aW9uIiwidXNlckluZm8iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiaGFuZGxlQWRkQ2FyZCIsImNhcmQiLCJmb3JtVmFsaWRhdG9ycyIsInBvcHVwV2l0aEltYWdlIiwiZm9ybVNlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsIl9wb3B1cEltYWdlIiwiX2NhcHRpb25Qb3B1cEltYWdlIiwiaW1hZ2UiLCJzZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXIiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJvYmplY3QiLCJyZXZlcnNlIiwicmVuZGVySXRlbSIsInByZXBlbmQiLCJkZWZhdWx0Q2FyZExpc3QiLCJtYXAiLCJjcmVhdGVDYXJkIiwiSW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBDYXJkIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImF2YXRhcklucHV0IiwiX2Rlc2NyaXB0aW9uIiwiX2F2YXRhcklucHV0IiwiZ2V0VXNlckluZm8iLCJfdXNlckluZm8iLCJhdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFySW1wdXQiLCJwb3B1cFByb2ZpbGVTZXR0aW5nIl0sInNvdXJjZVJvb3QiOiIifQ==